{% extends 'professional_base.html' %}
{% load static %}

{% block title %}Hospital Registration - WeDonate Medical Platform{% endblock %}

{% block extra_nav %}
<a class="nav-link text-white" href="{% url 'wedonate' %}">
    <i class="fas fa-home me-1"></i>
    Home
</a>
<a class="nav-link text-white" href="{% url 'hospital-login' %}">
    <i class="fas fa-sign-in-alt me-1"></i>
    Login
</a>
{% endblock %}

{% block content %}
<!-- Professional Hero Section -->
<section class="professional-hero-small">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="text-white mb-3">
                    <i class="fas fa-hospital me-3"></i>
                    Hospital Registration
                </h1>
                <p class="text-white-75 fs-5">Join our network of healthcare partners and help save lives</p>
            </div>
            <div class="col-lg-4 text-end">
                <div class="professional-badge">
                    <i class="fas fa-network-wired me-2"></i>
                    Partner Network
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Professional Registration Form -->
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-7 col-md-8">
                <div class="professional-card">
                    <div class="text-center mb-4">
                        <div class="professional-icon-large mb-3">
                            <i class="fas fa-hospital-user"></i>
                        </div>
                        <h3 class="text-primary mb-2">Hospital Registration</h3>
                        <p class="text-muted">Register your healthcare facility to access our organ donation network</p>
                    </div>
                    
                    <form method="POST" class="professional-form">
                        {% csrf_token %}
                        
                        <!-- Hospital Information -->
                        <div class="row">
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="hospital_name" class="professional-label">
                                        <i class="fas fa-hospital me-2"></i>
                                        Hospital Name
                                    </label>
                                    <input type="text" name="hospital_name" class="professional-input" id="hospital_name" 
                                           placeholder="Enter hospital name" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="email" class="professional-label">
                                        <i class="fas fa-envelope me-2"></i>
                                        Email Address
                                    </label>
                                    <input type="email" name="email" class="professional-input" id="email" 
                                           placeholder="Enter hospital email" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="professional-form-group">
                            <label for="username" class="professional-label">
                                <i class="fas fa-user-md me-2"></i>
                                Username
                            </label>
                            <input type="text" name="username" class="professional-input" id="username" 
                                   placeholder="Choose a unique username" required>
                        </div>
                        
                        <!-- Location Information -->
                        <div class="row">
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="city" class="professional-label">
                                        <i class="fas fa-city me-2"></i>
                                        City
                                    </label>
                                    <input type="text" name="city" class="professional-input" id="city" placeholder="Enter city">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="province" class="professional-label">
                                        <i class="fas fa-map-marker-alt me-2"></i>
                                        State
                                    </label>
                                    <select name="province" class="professional-select" id="province">
                                        <option value="" disabled selected>Select State</option>
                                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                                        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                        <option value="Assam">Assam</option>
                                        <option value="Bihar">Bihar</option>
                                        <option value="Chhattisgarh">Chhattisgarh</option>
                                        <option value="Goa">Goa</option>
                                        <option value="Gujarat">Gujarat</option>
                                        <option value="Haryana">Haryana</option>
                                        <option value="Himachal Pradesh">Himachal Pradesh</option>
                                        <option value="Jharkhand">Jharkhand</option>
                                        <option value="Karnataka">Karnataka</option>
                                        <option value="Kerala">Kerala</option>
                                        <option value="Madhya Pradesh">Madhya Pradesh</option>
                                        <option value="Maharashtra">Maharashtra</option>
                                        <option value="Manipur">Manipur</option>
                                        <option value="Meghalaya">Meghalaya</option>
                                        <option value="Mizoram">Mizoram</option>
                                        <option value="Nagaland">Nagaland</option>
                                        <option value="Odisha">Odisha</option>
                                        <option value="Punjab">Punjab</option>
                                        <option value="Rajasthan">Rajasthan</option>
                                        <option value="Sikkim">Sikkim</option>
                                        <option value="Tamil Nadu">Tamil Nadu</option>
                                        <option value="Telangana">Telangana</option>
                                        <option value="Tripura">Tripura</option>
                                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                                        <option value="Uttarakhand">Uttarakhand</option>
                                        <option value="West Bengal">West Bengal</option>
                                        <option value="Delhi">Delhi</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="contact_number" class="professional-label">
                                        <i class="fas fa-phone me-2"></i>
                                        Contact Number (+91)
                                    </label>
                                    <input type="tel" name="contact_number" class="professional-input" id="contact_number" 
                                           placeholder="10-digit phone number" maxlength="10" minlength="10" pattern="[0-9]{10}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="country" class="professional-label">
                                        <i class="fas fa-flag me-2"></i>
                                        Country
                                    </label>
                                    <select name="country" class="professional-select" id="country">
                                        <option value="India" selected>India</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Password Section -->
                        <div class="row">
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="password1" class="professional-label">
                                        <i class="fas fa-lock me-2"></i>
                                        Create Password
                                    </label>
                                    <div class="professional-input-group">
                                        <input type="password" name="password" class="professional-input" id="password1" 
                                               placeholder="Create a strong password" minlength="6" 
                                               pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}" 
                                               title="Password must contain at least 1 uppercase letter, 1 lowercase letter and 1 digit" required>
                                        <button type="button" class="professional-toggle-password" onclick="togglePassword('password1')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        At least 6 characters with uppercase, lowercase and digit
                                    </small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="professional-form-group">
                                    <label for="password2" class="professional-label">
                                        <i class="fas fa-lock me-2"></i>
                                        Confirm Password
                                    </label>
                                    <div class="professional-input-group">
                                        <input type="password" class="professional-input" id="password2" 
                                               placeholder="Confirm your password" oninput="checkpassword();" required>
                                        <button type="button" class="professional-toggle-password" onclick="togglePassword('password2')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div id="password-validation-msg" class="mt-2"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="professional-form-group">
                            <button type="submit" id="submit" class="professional-btn professional-btn-primary w-100" disabled>
                                <i class="fas fa-hospital-user me-2"></i>
                                Register Hospital
                            </button>
                        </div>
                        
                        <!-- Login Link -->
                        <div class="text-center">
                            <p class="text-muted mb-0">
                                Already have an account? 
                                <a href="{% url 'hospital-login' %}" class="professional-link">
                                    <i class="fas fa-sign-in-alt me-1"></i>
                                    Sign In Here
                                </a>
                            </p>
                        </div>
                    </form>
                </div>
                
                <!-- Professional Benefits Grid -->
                <div class="row g-3 mt-4">
                    <div class="col-md-4">
                        <div class="professional-feature-card text-center">
                            <div class="professional-feature-icon">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <div class="professional-feature-title">Network Access</div>
                            <div class="professional-feature-subtitle">Connect nationwide</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="professional-feature-card text-center">
                            <div class="professional-feature-icon professional-feature-icon-teal">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="professional-feature-title">Secure Platform</div>
                            <div class="professional-feature-subtitle">HIPAA Compliant</div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="professional-feature-card text-center">
                            <div class="professional-feature-icon professional-feature-icon-accent">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="professional-feature-title">Analytics</div>
                            <div class="professional-feature-subtitle">Track & Manage</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    function checkpassword() {
        const password1 = document.getElementById('password1').value;
        const password2 = document.getElementById('password2').value;
        const msgElement = document.getElementById('password-validation-msg');
        const submitBtn = document.getElementById('submit');
        
        if (password2 === '') {
            msgElement.innerHTML = '';
            submitBtn.disabled = true;
            return;
        }
        
        if (password1 === password2) {
            msgElement.innerHTML = '<small class="text-success"><i class="fas fa-check-circle me-1"></i>Passwords match!</small>';
            submitBtn.disabled = false;
        } else {
            msgElement.innerHTML = '<small class="text-danger"><i class="fas fa-times-circle me-1"></i>Passwords do not match!</small>';
            submitBtn.disabled = true;
        }
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');
        const submitBtn = document.getElementById('submit');
        
        // Form submission enhancement
        form.addEventListener('submit', function(e) {
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Registering Hospital...';
            submitBtn.disabled = true;
        });
        
        // Real-time validation feedback
        const inputs = document.querySelectorAll('input[required]');
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.value && this.checkValidity()) {
                    this.style.borderColor = 'var(--success)';
                } else if (this.value) {
                    this.style.borderColor = 'var(--danger)';
                }
            });
        });
    });
</script>
{% endblock %}