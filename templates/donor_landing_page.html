{% extends 'professional_base.html' %}
{% load static %}

{% block title %}Medical Donor Portal - WeDonate Professional Platform{% endblock %}

{% block extra_nav %}
<a class="nav-link text-white" href="{% url 'donor-landing-page' %}">
    <i class="fas fa-home me-1"></i>
    Home
</a>
<a class="nav-link text-white" href="{% url 'donor-home' %}">
    <i class="fas fa-history me-1"></i>
    History
</a>
<a class="nav-link text-white" href="{% url 'book-appointment' %}">
    <i class="fas fa-calendar-plus me-1"></i>
    Book Appointment
</a>
<a class="nav-link text-white" href="{% url 'new-donation-request' %}">
    <i class="fas fa-plus-circle me-1"></i>
    New Donation
</a>
<div class="dropdown">
    <a class="nav-link text-white dropdown-toggle" href="#" id="settingsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fas fa-user-cog me-1"></i>
        Settings
    </a>
    <ul class="dropdown-menu professional-dropdown" aria-labelledby="settingsDropdown">
        <li><a class="dropdown-item" href="{% url 'donor-profile-update' %}">
            <i class="fas fa-user-edit me-2"></i>User Profile
        </a></li>
        <li><a class="dropdown-item" href="{% url 'donor-profile-update' %}">
            <i class="fas fa-key me-2"></i>Change Password
        </a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item text-danger" href="{% url 'donor-logout' %}">
            <i class="fas fa-sign-out-alt me-2"></i>Log Out
        </a></li>
    </ul>
</div>
{% endblock %}

{% block content %}
<!-- Professional Hero Section -->
<section class="professional-hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="text-white mb-4">
                    <i class="fas fa-heart me-3"></i>
                    Your Medical Donation Matters
                </h1>
                <p class="text-white-75 fs-5 mb-4">Join thousands of medical professionals making a difference through organ donation in our secure, HIPAA-compliant platform</p>
                <div class="d-flex gap-3 flex-wrap">
                    <a href="{% url 'new-donation-request' %}" class="professional-btn professional-btn-primary btn-lg">
                        <i class="fas fa-hand-holding-heart me-2"></i>
                        Make a Donation
                    </a>
                    <a href="{% url 'donor-home' %}" class="professional-btn professional-btn-outline btn-lg">
                        <i class="fas fa-clipboard-list me-2"></i>
                        View History
                    </a>
                </div>
            </div>
            <div class="col-lg-4 text-end">
                <div class="professional-hero-badge">
                    <i class="fas fa-shield-alt me-2"></i>
                    Medical Professional Platform
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Professional Statistics Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="text-primary mb-3">Critical Medical Statistics</h2>
            <p class="text-muted fs-5">Understanding the urgency of organ donation</p>
        </div>
        <div class="row g-4 mb-5">
            <div class="col-md-4">
                <div class="professional-stat-card text-center">
                    <div class="professional-stat-icon professional-stat-icon-teal mb-3">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3 class="professional-count mb-2">113,000+</h3>
                    <p class="text-muted mb-0">Patients on transplant waiting list</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="professional-stat-card text-center">
                    <div class="professional-stat-icon professional-stat-icon-warning mb-3">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="professional-count mb-2">Every 10 Min</h3>
                    <p class="text-muted mb-0">Someone is added to waiting list</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="professional-stat-card text-center">
                    <div class="professional-stat-icon professional-stat-icon-danger mb-3">
                        <i class="fas fa-heart-broken"></i>
                    </div>
                    <h3 class="professional-count mb-2">20 Patients</h3>
                    <p class="text-muted mb-0">Die each day waiting for transplant</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Professional Call to Action Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="professional-card text-center">
            <h3 class="text-primary mb-3">
                <i class="fas fa-hands-helping me-2"></i>
                Make a Professional Medical Impact
            </h3>
            <p class="text-muted mb-4 fs-5">
                Book an appointment in a certified hospital of your choice and get your donation professionally approved. 
                Your single medical decision can save up to 8 lives and enhance the lives of many more through our secure platform.
            </p>
            <div class="d-flex gap-3 justify-content-center flex-wrap">
                <a href="{% url 'new-donation-request' %}" class="professional-btn professional-btn-primary">
                    <i class="fas fa-plus-circle me-2"></i>
                    Start Donation Process
                </a>
                <a href="{% url 'book-appointment' %}" class="professional-btn professional-btn-success">
                    <i class="fas fa-calendar-plus me-2"></i>
                    Book Medical Appointment
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Professional Information Gallery -->
<section class="py-5">
    <div class="container">
        <div class="professional-card">
            <div class="professional-card-header">
                <h4 class="mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    Medical Information Center
                </h4>
            </div>
            <div class="professional-card-body p-0">
                <div id="medicalCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#medicalCarousel" data-bs-slide-to="0" class="active"></button>
                        <button type="button" data-bs-target="#medicalCarousel" data-bs-slide-to="1"></button>
                    </div>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <div class="text-center p-5">
                                <img src="{% static 'images/facts.jpg' %}" class="img-fluid rounded mb-4" alt="Medical Donation Facts" style="max-height: 300px; border-radius: 8px;">
                                <h5 class="text-primary mb-2">Medical Donation Facts</h5>
                                <p class="text-muted">Evidence-based information about the life-saving impact of organ donation</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="text-center p-5">
                                <img src="{% static 'images/organs.png' %}" class="img-fluid rounded mb-4" alt="Organ Types" style="max-height: 300px; border-radius: 8px;">
                                <h5 class="text-primary mb-2">Types of Medical Donations</h5>
                                <p class="text-muted">Comprehensive guide to different organs and tissues that can be donated</p>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#medicalCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#medicalCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Professional Process Steps -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h3 class="text-primary mb-3">
                <i class="fas fa-route me-2"></i>
                Professional Medical Donation Process
            </h3>
            <p class="text-muted fs-5">Streamlined, secure, and medically supervised</p>
        </div>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="professional-process-card text-center h-100">
                    <div class="professional-process-number mb-3">1</div>
                    <div class="professional-process-icon mb-3">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <h5 class="text-primary mb-2">Medical Registration</h5>
                    <p class="text-muted mb-0">Complete secure donor profile with medical verification</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="professional-process-card text-center h-100">
                    <div class="professional-process-number mb-3">2</div>
                    <div class="professional-process-icon mb-3">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <h5 class="text-primary mb-2">Medical Request</h5>
                    <p class="text-muted mb-0">Submit donation request with comprehensive medical details</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="professional-process-card text-center h-100">
                    <div class="professional-process-number mb-3">3</div>
                    <div class="professional-process-icon mb-3">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h5 class="text-primary mb-2">Hospital Appointment</h5>
                    <p class="text-muted mb-0">Schedule with certified medical facility</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="professional-process-card text-center h-100">
                    <div class="professional-process-number mb-3">4</div>
                    <div class="professional-process-icon mb-3">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h5 class="text-primary mb-2">Save Lives</h5>
                    <p class="text-muted mb-0">Complete the process and become a medical hero</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Professional Quick Actions -->
<section class="py-5">
    <div class="container">
        <div class="text-center">
            <h4 class="text-primary mb-4">Ready to Begin Your Medical Journey?</h4>
            <p class="text-muted mb-4">Join our professional medical platform and start making a difference</p>
            <div class="d-flex gap-3 justify-content-center flex-wrap">
                <a href="{% url 'new-donation-request' %}" class="professional-btn professional-btn-primary btn-lg">
                    <i class="fas fa-heart me-2"></i>
                    Start Medical Donation
                </a>
                <a href="{% url 'donor-home' %}" class="professional-btn professional-btn-outline btn-lg">
                    <i class="fas fa-clipboard-list me-2"></i>
                    View Medical History
                </a>
                <button type="button" class="professional-btn professional-btn-success btn-lg" onclick="showQuickActions()">
                    <i class="fas fa-bolt me-2"></i>
                    Quick Actions
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Floating Action Button Menu -->
<div class="fab-container" id="fabContainer">
    <div class="fab-menu" id="fabMenu">
        <a href="{% url 'new-donation-request' %}" class="fab-item" title="New Donation Request">
            <i class="fas fa-plus"></i>
        </a>
        <a href="{% url 'book-appointment' %}" class="fab-item" title="Book Appointment">
            <i class="fas fa-calendar-plus"></i>
        </a>
        <a href="{% url 'donor-home' %}" class="fab-item" title="View History">
            <i class="fas fa-history"></i>
        </a>
        <a href="{% url 'donor-profile-update' %}" class="fab-item" title="Profile Settings">
            <i class="fas fa-user-cog"></i>
        </a>
    </div>
    <button class="fab-main" id="fabMain" onclick="toggleFab()" aria-label="Quick actions menu">
        <i class="fas fa-plus"></i>
    </button>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Professional landing page enhancements
    document.addEventListener('DOMContentLoaded', function() {
        // Auto-advance medical carousel
        const medicalCarousel = document.getElementById('medicalCarousel');
        if (medicalCarousel) {
            const carousel = new bootstrap.Carousel(medicalCarousel, {
                interval: 6000,
                wrap: true
            });
        }
        
        // Animate statistics counters
        const counters = document.querySelectorAll('.professional-count');
        counters.forEach(counter => {
            const text = counter.textContent;
            const numbers = text.match(/\d+/);
            if (numbers) {
                animateCounter(counter, parseInt(numbers[0]), text.replace(numbers[0], ''));
            }
        });
        
        // Add hover effects to process cards
        const processCards = document.querySelectorAll('.professional-process-card');
        processCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = '0 10px 30px rgba(0,0,0,0.1)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
            });
        });
        
        // Add ripple effect to professional buttons
        const professionalBtns = document.querySelectorAll('.professional-btn');
        professionalBtns.forEach(btn => {
            btn.addEventListener('click', function(e) {
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    left: ${x}px;
                    top: ${y}px;
                    background: rgba(255,255,255,0.5);
                    border-radius: 50%;
                    transform: scale(0);
                    animation: ripple 0.6s linear;
                    pointer-events: none;
                `;
                
                this.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });
        });
        
        // Initialize FAB after page load
        setTimeout(() => {
            const fabContainer = document.getElementById('fabContainer');
            if (fabContainer) {
                fabContainer.style.opacity = '1';
                fabContainer.style.transform = 'scale(1)';
            }
        }, 1000);
    });
    
    // Counter animation function
    function animateCounter(element, target, suffix = '') {
        let current = 0;
        const increment = Math.max(1, Math.ceil(target / 50));
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            element.textContent = current + suffix;
        }, 40);
    }
    
    // FAB toggle function
    function toggleFab() {
        const fabMenu = document.getElementById('fabMenu');
        const fabMain = document.getElementById('fabMain');
        const isOpen = fabMenu.classList.contains('open');
        
        if (isOpen) {
            fabMenu.classList.remove('open');
            fabMain.classList.remove('open');
        } else {
            fabMenu.classList.add('open');
            fabMain.classList.add('open');
        }
    }
    
    // Quick actions modal
    function showQuickActions() {
        const modal = document.createElement('div');
        modal.className = 'modal fade';
        modal.innerHTML = `
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"><i class="fas fa-bolt me-2"></i>Quick Actions</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <a href="{% url 'new-donation-request' %}" class="btn btn-primary w-100 p-3">
                                    <i class="fas fa-plus-circle fa-2x d-block mb-2"></i>
                                    New Donation Request
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'book-appointment' %}" class="btn btn-success w-100 p-3">
                                    <i class="fas fa-calendar-plus fa-2x d-block mb-2"></i>
                                    Book Appointment
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'donor-home' %}" class="btn btn-info w-100 p-3">
                                    <i class="fas fa-history fa-2x d-block mb-2"></i>
                                    View History
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'donor-profile-update' %}" class="btn btn-warning w-100 p-3">
                                    <i class="fas fa-user-cog fa-2x d-block mb-2"></i>
                                    Profile Settings
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
        const modalInstance = new bootstrap.Modal(modal);
        modalInstance.show();
        modal.addEventListener('hidden.bs.modal', () => modal.remove());
    }
    
    // Make functions globally available
    window.toggleFab = toggleFab;
    window.showQuickActions = showQuickActions;
</script>

<style>
@keyframes ripple {
    to {
        transform: scale(2);
        opacity: 0;
    }
}

/* Floating Action Button Styles */
.fab-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.3s ease;
}

.fab-main {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
    border: none;
    color: white;
    font-size: 1.5rem;
    box-shadow: 0 4px 20px rgba(44, 90, 160, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.fab-main:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 25px rgba(44, 90, 160, 0.4);
}

.fab-main.open {
    transform: rotate(45deg);
    background: linear-gradient(135deg, var(--danger), #dc2626);
}

.fab-menu {
    position: absolute;
    bottom: 70px;
    right: 0;
    display: flex;
    flex-direction: column;
    gap: 15px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px);
    transition: all 0.3s ease;
}

.fab-menu.open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.fab-item {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--white);
    color: var(--primary-blue);
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    box-shadow: 0 3px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    position: relative;
}

.fab-item:hover {
    transform: scale(1.1);
    background: var(--primary-blue);
    color: var(--white);
    text-decoration: none;
}

.fab-item::before {
    content: attr(title);
    position: absolute;
    right: 60px;
    background: var(--dark-gray);
    color: var(--white);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.8rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transform: translateX(10px);
    transition: all 0.3s ease;
    pointer-events: none;
}

.fab-item:hover::before {
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
}

/* Professional button enhancements */
.professional-btn-success {
    background: var(--success);
    color: var(--white);
    border: 2px solid var(--success);
}

.professional-btn-success:hover {
    background: #059669;
    border-color: #059669;
    color: var(--white);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
}

/* Mobile responsiveness for FAB */
@media (max-width: 768px) {
    .fab-container {
        bottom: 20px;
        right: 20px;
    }
    
    .fab-main {
        width: 55px;
        height: 55px;
        font-size: 1.3rem;
    }
    
    .fab-item {
        width: 45px;
        height: 45px;
        font-size: 1.1rem;
    }
    
    .fab-item::before {
        display: none;
    }
}
</style>
{% endblock %}
